/*!
* jQuery Text Counter Plugin v0.6.0
* https://github.com/ractoon/jQuery-Text-Counter
*
* Copyright 2014 ractoon
* Released under the MIT license
*/
!function(t){t.textcounter=function(n,o){var e=this;e.$el=t(n),e.el=n,e.$el.data("textcounter",e),e.init=function(){e.options=t.extend({},t.textcounter.defaultOptions,o);var n=e.options.countDown?e.options.countDownText:e.options.counterText,r=e.options.countDown?e.options.max:0,i=t("<div/>").html(n.replace("%d",'<span class="'+e.options.textCountClass+'">'+r+"</span>")).contents();e.$container=t("<"+e.options.countContainerElement+"/>").addClass(e.options.countContainerClass).append(i),e.$text_counter=e.$container.find("span"),e.$el.before(e.$container),e.$el.bind("keyup.textcounter click.textcounter blur.textcounter focus.textcounter change.textcounter paste.textcounter",e.checkLimits).trigger("click.textcounter"),e.options.init(e.el)},e.checkLimits=function(n){var o=e.$el,r=(e.$container,o.val()),i=0,s=0,a=void 0===n.originalEvent?!1:!0;if(!t.isEmptyObject(r))if("word"==e.options.type)i=r.trim().replace(/\s+/gi," ").split(" ").length;else{if(e.options.twoCharCarriageReturn){var c=r.match(/(\r\n|\n|\r)/g),u=0;null!==c&&(u=c.length)}if(i=e.options.countSpaces?r.replace(/[^\S\n|\r|\r\n]/g," ").length:r.replace(/\s/g,"").length,e.options.countExtendedCharacters){var l=r.match(/[^\x00-\xff]/gi);i=null==l?r.length:r.length+l.length}e.options.twoCharCarriageReturn&&(i+=u)}if("auto"==e.options.max){var p=e.$el.attr("maxlength");void 0!==p&&p!==!1?e.options.max=p:e.$container.text("error: [maxlength] attribute not set")}if(s=e.options.countDown?e.options.max-i:i,e.setCount(s),e.options.min>0&&a&&(i<e.options.min?(e.setErrors("min"),e.options.minunder(e.el)):i<e.options.min||(e.options.mincount(e.el),e.clearErrors("min"))),-1!==e.options.max)if(i<e.options.max||0==e.options.max)e.options.maxunder(e.el),e.clearErrors("max");else if(e.options.maxcount(e.el),e.options.stopInputAtMaximum){var x="";if("word"==e.options.type)for(var m=r.split(/[^\S\n]/g),d=0;d<m.length&&d<e.options.max-1;)void 0!==m[d]&&(x+=m[d]+" ",d++);else if(e.options.countSpaces)x=r.substring(0,e.options.max);else for(var f=r.split(""),h=f.length,C=0,d=0;C<e.options.max&&h>d;)" "!==f[d]&&C++,x+=f[d++];o.val(x.trim()),s=e.options.countDown?0:e.options.max,e.setCount(s)}else e.setErrors("max")},e.setCount=function(t){e.$text_counter.text(t)},e.setErrors=function(t){var n=e.$el,o=e.$container,r="";if(n.addClass(e.options.inputErrorClass),o.addClass(e.options.counterErrorClass),e.options.displayErrorText){switch(t){case"min":r=e.options.minimumErrorText;break;case"max":r=e.options.maximumErrorText}o.children(".error-text-"+t).length||o.append("<"+e.options.errorTextElement+' class="error-text error-text-'+t+'">'+r+"</"+e.options.errorTextElement+">")}},e.clearErrors=function(t){var n=e.$el,o=e.$container;o.children(".error-text-"+t).remove(),0==o.children(".error-text").length&&(n.removeClass(e.options.inputErrorClass),o.removeClass(e.options.counterErrorClass))},e.init()},t.textcounter.defaultOptions={type:"character",min:0,max:200,countContainerElement:"div",countContainerClass:"text-count-wrapper",textCountClass:"text-count",inputErrorClass:"error",counterErrorClass:"error",counterText:"Total Count: %d",errorTextElement:"div",minimumErrorText:"Minimum not met",maximumErrorText:"Maximum exceeded",displayErrorText:!0,stopInputAtMaximum:!0,countSpaces:!1,countDown:!1,countDownText:"Remaining: %d",countExtendedCharacters:!1,twoCharCarriageReturn:!1,maxunder:function(){},minunder:function(){},maxcount:function(){},mincount:function(){},init:function(){}},t.fn.textcounter=function(n){return this.each(function(){new t.textcounter(this,n)})}}(jQuery);